const script=document.createElement("script");script.src=chrome.runtime.getURL("script/inject.min.js"),script.type="module",(document.head||document.documentElement).appendChild(script),script.onload=()=>script.remove();const watchDomMessage=async id=>new Promise(resolve=>{const checkInt=setInterval(()=>{const extMessageContainer=document.querySelector("#"+id);if(extMessageContainer){const extMessage=JSON.parse(extMessageContainer.value);extMessageContainer.remove(),clearInterval(checkInt),resolve(extMessage)}},100)}),writeDomMessage=(id,message)=>{const el=document.createElement("input");el.id=id,el.type="hidden",el.value=JSON.stringify(message),document.body.insertAdjacentElement("beforeend",el)};chrome.runtime.onMessage.addListener((message,sender,reply)=>(writeDomMessage("extension-message-received",message),watchDomMessage("extension-message-received-reply").then(response=>{reply(response)}),!0));const watch=async()=>{const message=await watchDomMessage("extension-message-sent");chrome.runtime.sendMessage(message,response=>{writeDomMessage("extension-message-sent-reply",response)}),setTimeout(()=>watch(),100)};watch();
//# sourceMappingURL=contentScript.min.js.map