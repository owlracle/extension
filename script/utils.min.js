import advisor from"./advisor.min.js";const serverURL="https://owlracle.info",storage={set:async function(key,value){const settings={};settings[key]=value,await chrome.storage.local.set(settings)},get:async function(key){const obj=await chrome.storage.local.get(key);return!!Object.keys(obj).length&&obj[key]},delete:async function(key){return!!await this.get(key)&&(await chrome.storage.local.remove(key),!0)}},login={set:async function(args){const login=await storage.get("login")||{};Object.entries(args).forEach(([k,v])=>login[k]=v),storage.set("login",login),login.apikey&&(advisor.set({apiKey:login.apikey}),menu.enable("advisor"))},refresh:function(){this.set({})},get:async function(field){const login=await storage.get("login");return!!login&&(field?!!login[field]&&login[field]:login)},delete:async function(fields){Array.isArray(fields)||(fields=[fields]);const login=await storage.get("login",!0);fields.forEach(f=>{login&&login[f]&&delete login[f]}),storage.set("login",login),fields.includes("apikey")&&(advisor.set({apiKey:!1}),menu.disable("advisor"))}},network={list:{eth:{symbol:"eth",name:"Ethereum",token:"ETH",explorer:{icon:"https://etherscan.io/images/favicon3.ico",href:"https://etherscan.io",name:"Etherscan",apiAvailable:!0}},bsc:{symbol:"bsc",name:"BSC",longName:"Binance Smart Chain",token:"BNB",explorer:{icon:"https://bscscan.com/images/favicon.ico",href:"https://bscscan.com",name:"BscScan",apiAvailable:!0}},poly:{symbol:"poly",name:"Polygon",token:"MATIC",explorer:{icon:"https://polygonscan.com/images/favicon.ico",href:"https://polygonscan.com",name:"PolygonScan",apiAvailable:!0}},ftm:{symbol:"ftm",name:"Fantom",token:"FTM",explorer:{icon:"https://ftmscan.com/images/favicon.png",href:"https://ftmscan.com",name:"FtmScan",apiAvailable:!0}},avax:{symbol:"avax",name:"Avalanche",token:"AVAX",explorer:{icon:"https://snowtrace.io/images/favicon.ico",href:"https://snowtrace.io",name:"SnowTrace",apiAvailable:!0}},cro:{symbol:"cro",name:"Cronos",token:"CRO",explorer:{icon:"https://cronoscan.com/images/favicon.ico",href:"https://cronoscan.com/",name:"Cronoscan",apiAvailable:!0}},movr:{symbol:"movr",name:"Moonriver",token:"MOVR",explorer:{icon:"https://moonriver.moonscan.io/images/favicon.ico",href:"https://moonriver.moonscan.io/",name:"MoonScan",apiAvailable:!0}},one:{symbol:"one",name:"Harmony",token:"ONE",explorer:{icon:"https://explorer.harmony.one/favicon.ico",href:"https://explorer.harmony.one",name:"Harmony Explorer",apiAvailable:!1}},ht:{symbol:"ht",name:"Heco",token:"HT",explorer:{icon:"https://hecoinfo.com/favicon.ico",href:"https://hecoinfo.com",name:"HecoInfo",apiAvailable:!1}},celo:{symbol:"celo",name:"Celo",token:"CELO",explorer:{icon:"https://avatars.githubusercontent.com/u/37552875?s=200&v=4",href:"https://explorer.celo.org",name:"Celo Explorer",apiAvailable:!1}},fuse:{symbol:"fuse",name:"Fuse",token:"FUSE",explorer:{icon:"https://explorer.fuse.io/images/favicon-543fd97558f89019d8ee94144a7e46c7.ico?vsn=d",href:"https://explorer.fuse.io/",name:"Fuse Explorer",apiAvailable:!1}}},get:async function(name){return name||(name=await storage.get("network")||"eth"),this.list[name]},set:function(name){storage.set("network",name)},getList:function(){return this.list}},imgCache=(Object.values(network.getList()).forEach(e=>{e.icon=document.createElement("img"),e.icon.src=`https://owlracle.info/img/${e.symbol}.png`}),Object.fromEntries([...["candle-chart","line-chart"].map(e=>{const img=document.createElement("img");return img.src=`https://owlracle.info/img/${e}.png`,[e,img]}),...["time-10","time-30","time-60","time-120","time-240","time-1440"].map(e=>{const img=document.createElement("img");return img.src=`img/${e}.png`,[e,img]})]));class Dropdown{constructor({button:button,itemList:itemList,position:position,clickFn:clickFn}){button.addEventListener("click",(function(){const dropdown=document.createElement("div");dropdown.id="dropdown",itemList.forEach(e=>{const item=document.createElement("div");item.classList.add("item"),item.innerHTML=e.innerHTML,Object.entries(e).forEach(([k,v])=>{"innerHTML"!=k&&item.setAttribute(k,v)}),dropdown.appendChild(item)}),position||(position={top:0,left:0}),dropdown.style.top=`${this.offsetTop+this.clientHeight+position.top}px`,dropdown.style.left=`${this.offsetLeft+position.left}px`;const fog=document.createElement("div");fog.id="fog",fog.classList.add("invisible"),document.body.appendChild(fog),fog.appendChild(dropdown),fog.addEventListener("click",()=>fog.remove());const items=dropdown.querySelectorAll(".item");return items.forEach(b=>b.addEventListener("click",()=>clickFn(b))),this}))}}class ModalWindow{constructor({title:title,message:message,className:className,buttons:buttons}){const fog=document.createElement("div");return fog.id="fog",className&&fog.classList.add(className),buttons||(buttons={OK:()=>{}}),fog.innerHTML=`<div class="modal">\n                <h2>${title}</h2>\n                <div id="content">${message}</div>\n                <div id="button-container">\n                    ${Object.keys(buttons).map(b=>`<button>${b}</button>`).join("")}\n                </div>\n            </div>`,document.body.appendChild(fog),fog.addEventListener("click",()=>fog.remove()),fog.querySelector(".modal").addEventListener("click",e=>e.stopPropagation()),fog.querySelectorAll("#button-container button").forEach((b,i)=>{b.addEventListener("click",()=>{Object.values(buttons)[i](fog),fog.remove()})}),this}}const menu={active:"gas",init:async function(){document.querySelectorAll("#menu .item").forEach(e=>e.addEventListener("click",()=>this.setActive(e.id)));const menuCk=await storage.get("menu");if(menuCk)try{this.active=menuCk}catch(error){console.log(error),storage.delete("menu")}},setActive:function(active){this.isDisabled(active)||(this.active=active,document.querySelectorAll("#menu .item, #content .item").forEach(e=>{e.classList.remove("active")}),document.querySelector(`#content #${active}.item`).classList.add("active"),document.querySelector(`#menu #${active}.item`).classList.add("active"),storage.set("menu",this.active))},getActive:function(){return this.active},setClick:function(active,fn){document.querySelector(`#menu #${active}.item`).addEventListener("click",()=>{this.isDisabled(active)||fn()})},click:function(active){document.querySelector(`#menu #${active||this.active}.item`).click()},hide:function(){return document.querySelectorAll("#header, #menu").forEach(e=>e.classList.add("hidden")),this},show:function(){return document.querySelectorAll("#header, #menu").forEach(e=>e.classList.remove("hidden")),this},disable:function(active){document.querySelector(`#menu #${active}.item`).classList.add("disabled")},isDisabled:function(active){return document.querySelector(`#menu #${active}.item`).classList.contains("disabled")},enable:function(active){document.querySelector(`#menu #${active}.item`).classList.remove("disabled")}},messageBus={events:{},watch:async function(){chrome.runtime.onMessage.addListener((message,sender,reply)=>{let replyMsg="Message received";this.events[message.event]&&(replyMsg=this.events[message.event](message)),reply&&reply(replyMsg)})},addEvent:function(name,callback){this.events[name]=callback},send:function(event,message,reply,background=!1){background?chrome.runtime.sendMessage({event:event,message:message},response=>{reply&&reply(response)}):chrome.tabs.query({active:!0,currentWindow:!0},tabs=>{chrome.tabs.sendMessage(tabs[0].id,{event:event,message:message},response=>{reply&&reply(response)})})}};export{storage,login,network,imgCache,ModalWindow,Dropdown,menu,messageBus,serverURL};
//# sourceMappingURL=utils.min.js.map