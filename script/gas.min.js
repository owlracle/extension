import{network,ModalWindow,login,menu,serverURL}from"./utils.min.js";const gasTimer={cards:[{name:"ðŸ›´Slow",accept:35},{name:"ðŸš—Standard",accept:60},{name:"âœˆï¸Fast",accept:90},{name:"ðŸš€Instant",accept:100}],init:function(){const container=document.querySelector("#content #gas");container.innerHTML="",this.cards.forEach(card=>{const dom=`<div class="gas">\n                <div class="title">\n                    <div class="left">${card.name}</div>\n                </div>\n                <div class="body">\n                    <div class="gwei"><i class="fas fa-spin fa-cog"></i></div>\n                    <div class="usd"></div>\n                </div>\n            </div>`;container.insertAdjacentHTML("beforeend",dom)})},update:async function(){this.beforeUpdate();let query={accept:this.cards.map(e=>e.accept).join(","),source:"extension"};login.get("apikey")&&(query.apikey=login.get("apikey")),this.blocks&&(query.blocks=this.blocks),this.percentile&&(query.percentile=this.percentile),query=new URLSearchParams(query).toString();const data=await(await fetch(`${serverURL}/${network.get().symbol}/gas?${query}`)).json();return data.error&&403==data.status?(console.log(data),new ModalWindow({title:data.error,message:data.message,buttons:{LOGIN:()=>menu.click("key"),CLOSE:()=>{}}})):this.onUpdate(data),data},beforeUpdate:()=>{document.querySelectorAll(".gas .body").forEach((e,i)=>{e.querySelector(".gwei").innerHTML='<i class="fas fa-spin fa-cog"></i>',e.querySelector(".usd").innerHTML=""})},onUpdate:data=>{const gas=data.speeds.map(s=>s.gasPrice.toFixed(s.gasPrice==parseInt(s.gasPrice)?0:2)),fee=data.speeds.map(s=>s.estimatedFee.toFixed(4));document.querySelectorAll(".gas .body").forEach((e,i)=>{data.speeds&&(e.querySelector(".gwei").innerHTML=`${gas[i]} GWei`,e.querySelector(".usd").innerHTML=`$ ${fee[i]}`)})}};export default gasTimer;
//# sourceMappingURL=gas.min.js.map