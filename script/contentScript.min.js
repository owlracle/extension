const script=document.createElement("script");script.src=chrome.runtime.getURL("script/inject.min.js"),script.type="module",(document.head||document.documentElement).appendChild(script),script.onload=()=>script.remove();const watchDomMessage=async id=>new Promise(resolve=>{const checkInt=setInterval(()=>{const extMessageContainer=document.querySelector("#"+id);if(extMessageContainer){const extMessage=JSON.parse(extMessageContainer.value);extMessageContainer.remove(),clearInterval(checkInt),resolve(extMessage)}},100)}),writeDomMessage=(id,message)=>{const el=document.createElement("input");el.id=id,el.type="hidden",el.value=JSON.stringify(message),document.body.insertAdjacentElement("beforeend",el)},sendToDOM=async message=>(writeDomMessage("extension-message-received",message),await watchDomMessage("extension-message-received-reply"));chrome.runtime.onMessage.addListener((message,sender,reply)=>(sendToDOM(message).then(response=>reply(response)),!0));const watch=async()=>{const message=await watchDomMessage("extension-message-sent");chrome.runtime.sendMessage(message,response=>{writeDomMessage("extension-message-sent-reply",response)}),setTimeout(()=>watch(),100)};watch(),(async()=>{let storage=await chrome.storage.local.get();storage.apikey&&sendToDOM({event:"apikey",apiKey:storage.apikey})})();
//# sourceMappingURL=contentScript.min.js.map